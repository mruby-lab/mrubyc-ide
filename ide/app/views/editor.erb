<html>
<title>mrubyc-ide</title>
<head>
  <meta charset="UTF-8">

  <!-- エディタ関連 -->
  <script src="/lib/codemirror.js"></script>
  <link rel="stylesheet" href="/lib/codemirror.css">
  <link rel="stylesheet" href="/theme/base16-dark.css">
  <script src="/mode/ruby/ruby.js"></script>
  <script src="editor.js"></script>

</head>

<body>
  <h1>mrubyc開発環境 for <%= @writer_name %></h1>
  <form action="<%= @writer_action %>" method="POST" target="_blank">
    <div>
      コンパイラバージョン:
      <select name="version">
        <% for v in @versions do %>
        <% if v==@default_mrbc then %>
        <option value="<%= v %>" selected>mrbc <%= v %></option>
        <% else %>
        <option value="<%= v %>">mrbc <%= v %></option>
        <% end %>
        <% end %>
      </select>
    </div>
    <br>

    <div>
      <input type="file" id="select-file" onchange="selectFile()">
    </div>
    <br>

    <div>
      ファイル名:<br><input id="name" type="text" name="name" value="program">
    </div>
    <br>

    <div>
      mrubyプログラム:<br>
      <textarea id="program" name="program">puts "Hello"</textarea>
    </div>
    <br>

    <script> //シンタックスハイライト機能
      var editor = CodeMirror.fromTextArea(document.getElementById("program"), {
        mode: "ruby",
        lineNumbers: true,
        theme: 'base16-dark'
      });
      editor.setSize("60%", "60%");
      editor.save();
    </script>

    <div>
      <input type="submit" value="コンパイル&ダウンロード">
    </div>
  </form>

  <div>
    <button onclick="save();">ファイルを保存</button>
  </div>

</body>
</html>
